<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ç›£æŸ»ãƒ­ã‚°ãƒ†ã‚¹ãƒˆ">
    <title>ç›£æŸ»ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ  ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        
        .section h2 {
            color: #34495e;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn-primary { background: #3498db; color: white; }
        .btn-success { background: #27ae60; color: white; }
        .btn-warning { background: #f39c12; color: white; }
        .btn-danger { background: #e74c3c; color: white; }
        .btn-info { background: #17a2b8; color: white; }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .status {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .status.connected {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.disconnected {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .log-display {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-group textarea {
            height: 100px;
            resize: vertical;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            border: 1px solid #f5c6cb;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            border: 1px solid #c3e6cb;
        }
        
        .info {
            background: #d1ecf1;
            color: #0c5460;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            border: 1px solid #bee5eb;
        }

        /* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                padding: 15px;
            }

            h1 {
                font-size: 1.5em;
                margin-bottom: 20px;
            }

            .section h2 {
                font-size: 1.2em;
            }

            .button-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                margin-bottom: 10px;
                font-size: 16px; /* iOS ã®ã‚ºãƒ¼ãƒ é˜²æ­¢ */
                min-height: 44px; /* ã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®æœ€å°ã‚µã‚¤ã‚º */
            }

            .form-group input,
            .form-group select,
            .form-group textarea {
                font-size: 16px; /* iOS ã®ã‚ºãƒ¼ãƒ é˜²æ­¢ */
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .stat-card {
                padding: 10px;
            }

            .stat-value {
                font-size: 1.5em;
            }

            .log-display {
                font-size: 11px;
                max-height: 200px;
            }
        }

        /* iPad å¯¾å¿œ */
        @media (min-width: 768px) and (max-width: 1024px) {
            .button-group {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* ã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        @media (hover: none) and (pointer: coarse) {
            .btn:hover {
                transform: none;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” ç›£æŸ»ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ  ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸</h1>
        
        <!-- æ¥ç¶šçŠ¶æ…‹ -->
        <div class="section">
            <h2>æ¥ç¶šçŠ¶æ…‹</h2>
            <div id="connectionStatus" class="status disconnected">
                ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šä¸­...
            </div>
            <div class="button-group">
                <button class="btn btn-primary" onclick="checkConnection()">æ¥ç¶šç¢ºèª</button>
                <button class="btn btn-warning" onclick="reconnect()">å†æ¥ç¶š</button>
            </div>
        </div>
        
        <!-- çµ±è¨ˆæƒ…å ± -->
        <div class="section">
            <h2>çµ±è¨ˆæƒ…å ±</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalLogs">0</div>
                    <div class="stat-label">ç·ãƒ­ã‚°æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="syncedLogs">0</div>
                    <div class="stat-label">åŒæœŸæ¸ˆã¿</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="pendingLogs">0</div>
                    <div class="stat-label">æœªåŒæœŸ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="errorLogs">0</div>
                    <div class="stat-label">ã‚¨ãƒ©ãƒ¼æ•°</div>
                </div>
            </div>
            <div class="button-group">
                <button class="btn btn-info" onclick="updateStats()">çµ±è¨ˆæ›´æ–°</button>
                <button class="btn btn-success" onclick="forceSync()">æ‰‹å‹•åŒæœŸ</button>
            </div>
        </div>
        
        <!-- ãƒ­ã‚°è¨˜éŒ²ãƒ†ã‚¹ãƒˆ -->
        <div class="section">
            <h2>ãƒ­ã‚°è¨˜éŒ²ãƒ†ã‚¹ãƒˆ</h2>
            <div class="form-group">
                <label for="operationType">æ“ä½œã‚¿ã‚¤ãƒ—:</label>
                <select id="operationType">
                    <option value="seat_reservation">åº§å¸­äºˆç´„</option>
                    <option value="checkin">ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³</option>
                    <option value="walkin_ticket">å½“æ—¥åˆ¸ç™ºè¡Œ</option>
                    <option value="seat_edit">åº§å¸­ç·¨é›†</option>
                    <option value="mode_change">ãƒ¢ãƒ¼ãƒ‰å¤‰æ›´</option>
                    <option value="user_action">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</option>
                    <option value="system_event">ã‚·ã‚¹ãƒ†ãƒ ã‚¤ãƒ™ãƒ³ãƒˆ</option>
                    <option value="data_change">ãƒ‡ãƒ¼ã‚¿å¤‰æ›´</option>
                    <option value="javascript_error">JavaScriptã‚¨ãƒ©ãƒ¼</option>
                </select>
            </div>
            <div class="form-group">
                <label for="logDetails">è©³ç´°æƒ…å ± (JSON):</label>
                <textarea id="logDetails" placeholder='{"message": "ãƒ†ã‚¹ãƒˆãƒ­ã‚°", "data": {"id": 123}}'></textarea>
            </div>
            <div class="button-group">
                <button class="btn btn-primary" onclick="testLog()">ãƒ­ã‚°è¨˜éŒ²</button>
                <button class="btn btn-warning" onclick="testErrorLog()">ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è¨˜éŒ²</button>
                <button class="btn btn-danger" onclick="testMultipleLogs()">è¤‡æ•°ãƒ­ã‚°è¨˜éŒ²</button>
            </div>
        </div>
        
        <!-- ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <div class="section">
            <h2>ã‚·ã‚¹ãƒ†ãƒ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
            <div class="button-group">
                <button class="btn btn-success" onclick="simulateSeatReservation()">åº§å¸­äºˆç´„ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
                <button class="btn btn-info" onclick="simulateCheckin()">ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
                <button class="btn btn-warning" onclick="simulateWalkinTicket()">å½“æ—¥åˆ¸ç™ºè¡Œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
                <button class="btn btn-primary" onclick="simulateModeChange()">ãƒ¢ãƒ¼ãƒ‰å¤‰æ›´ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
            </div>
        </div>
        
        <!-- ãƒ­ã‚°è¡¨ç¤º -->
        <div class="section">
            <h2>ãƒ­ã‚°è¡¨ç¤º</h2>
            <div class="button-group">
                <button class="btn btn-info" onclick="showRecentLogs()">æœ€è¿‘ã®ãƒ­ã‚°è¡¨ç¤º</button>
                <button class="btn btn-warning" onclick="clearLogDisplay()">ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
            </div>
            <div id="logDisplay" class="log-display">ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™...</div>
        </div>
        
        <!-- è¨­å®š -->
        <div class="section">
            <h2>è¨­å®š</h2>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="enableAudit" checked> ç›£æŸ»ãƒ­ã‚°ã‚’æœ‰åŠ¹ã«ã™ã‚‹
                </label>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="enableAutoSync" checked> è‡ªå‹•åŒæœŸã‚’æœ‰åŠ¹ã«ã™ã‚‹
                </label>
            </div>
            <div class="button-group">
                <button class="btn btn-primary" onclick="updateSettings()">è¨­å®šæ›´æ–°</button>
                <button class="btn btn-info" onclick="resetSettings()">è¨­å®šãƒªã‚»ãƒƒãƒˆ</button>
            </div>
        </div>
    </div>

    <!-- ç›£æŸ»ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®èª­ã¿è¾¼ã¿ -->
    <script src="audit-client.js"></script>
    <script src="audit-integration.js"></script>
    
    <script>
        // ãƒ†ã‚¹ãƒˆç”¨ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        window.currentSpreadsheetId = 'test-spreadsheet-123';
        window.currentGroup = 'ãƒ†ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—';
        window.currentDay = '1';
        window.currentTimeslot = 'A';
        window.currentMode = 'normal';
        window.isDemoMode = false;
        window.demoGroup = null;
        
        // ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ‡ãƒ¼ã‚¿
        window.seatsData = {
            'seat-1': { id: 'seat-1', number: 'A1', status: 'available', group: 'ãƒ†ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—' },
            'seat-2': { id: 'seat-2', number: 'A2', status: 'reserved', group: 'ãƒ†ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—' }
        };
        
        window.walkinData = {
            'ticket-1': { id: 'ticket-1', number: 'W001', status: 'issued', group: 'ãƒ†ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—' }
        };

        // ãƒ†ã‚¹ãƒˆé–¢æ•°
        function checkConnection() {
            const status = document.getElementById('connectionStatus');
            if (window.auditClient && window.auditClient.isServerConnected()) {
                status.textContent = 'ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šæ¸ˆã¿';
                status.className = 'status connected';
            } else {
                status.textContent = 'ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã•ã‚Œã¦ã„ã¾ã›ã‚“';
                status.className = 'status disconnected';
            }
        }

        function reconnect() {
            if (window.auditClient) {
                window.auditClient.connectToServer().then(() => {
                    checkConnection();
                    showMessage('å†æ¥ç¶šã—ã¾ã—ãŸ', 'success');
                }).catch(error => {
                    showMessage('å†æ¥ç¶šã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message, 'error');
                });
            }
        }

        function updateStats() {
            if (window.auditClient) {
                window.auditClient.getStats().then(stats => {
                    document.getElementById('totalLogs').textContent = stats.total;
                    document.getElementById('syncedLogs').textContent = stats.synced;
                    document.getElementById('pendingLogs').textContent = stats.pending;
                    document.getElementById('errorLogs').textContent = stats.errors;
                });
            }
        }

        function forceSync() {
            if (window.auditClient) {
                window.auditClient.forceSync().then(() => {
                    showMessage('æ‰‹å‹•åŒæœŸã‚’å®Ÿè¡Œã—ã¾ã—ãŸ', 'success');
                    updateStats();
                }).catch(error => {
                    showMessage('åŒæœŸã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message, 'error');
                });
            }
        }

        function testLog() {
            const operation = document.getElementById('operationType').value;
            const detailsText = document.getElementById('logDetails').value;
            
            let details = {};
            try {
                if (detailsText.trim()) {
                    details = JSON.parse(detailsText);
                }
            } catch (error) {
                showMessage('JSONå½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“', 'error');
                return;
            }
            
            if (window.auditClient) {
                window.auditClient.log(operation, details);
                showMessage(`ãƒ­ã‚°ã‚’è¨˜éŒ²ã—ã¾ã—ãŸ: ${operation}`, 'success');
                updateStats();
            }
        }

        function testErrorLog() {
            const operation = document.getElementById('operationType').value;
            const details = {
                error: 'ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼',
                stackTrace: 'Error: ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼\n    at testErrorLog (test.html:123:45)',
                message: 'ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆç”¨ã®ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã§ã™'
            };
            
            if (window.auditClient) {
                window.auditClient.log(operation, details);
                showMessage(`ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’è¨˜éŒ²ã—ã¾ã—ãŸ: ${operation}`, 'success');
                updateStats();
            }
        }

        function testMultipleLogs() {
            const operations = [
                'seat_reservation',
                'checkin',
                'walkin_ticket',
                'seat_edit',
                'mode_change'
            ];
            
            operations.forEach((operation, index) => {
                setTimeout(() => {
                    if (window.auditClient) {
                        window.auditClient.log(operation, {
                            message: `ãƒ†ã‚¹ãƒˆãƒ­ã‚° ${index + 1}`,
                            timestamp: new Date().toISOString(),
                            data: { id: index + 1 }
                        });
                    }
                }, index * 100);
            });
            
            showMessage('è¤‡æ•°ãƒ­ã‚°ã‚’è¨˜éŒ²ã—ã¾ã—ãŸ', 'success');
            setTimeout(updateStats, 1000);
        }

        function simulateSeatReservation() {
            if (window.auditClient) {
                window.auditClient.log('seat_reservation', {
                    seatId: 'A1',
                    seatNumber: 'A1',
                    group: 'ãƒ†ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—',
                    day: '1',
                    timeslot: 'A',
                    beforeData: { status: 'available' },
                    afterData: { status: 'reserved', reservedBy: 'ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼' }
                });
                showMessage('åº§å¸­äºˆç´„ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã—ãŸ', 'success');
                updateStats();
            }
        }

        function simulateCheckin() {
            if (window.auditClient) {
                window.auditClient.log('checkin', {
                    seatId: 'A1',
                    seatNumber: 'A1',
                    group: 'ãƒ†ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—',
                    day: '1',
                    timeslot: 'A',
                    beforeData: { status: 'reserved' },
                    afterData: { status: 'checked_in', checkedInAt: new Date().toISOString() }
                });
                showMessage('ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã—ãŸ', 'success');
                updateStats();
            }
        }

        function simulateWalkinTicket() {
            if (window.auditClient) {
                window.auditClient.log('walkin_ticket', {
                    ticketId: 'W001',
                    ticketNumber: 'W001',
                    group: 'ãƒ†ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—',
                    day: '1',
                    timeslot: 'A',
                    beforeData: null,
                    afterData: { status: 'issued', issuedAt: new Date().toISOString() }
                });
                showMessage('å½“æ—¥åˆ¸ç™ºè¡Œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã—ãŸ', 'success');
                updateStats();
            }
        }

        function simulateModeChange() {
            if (window.auditClient) {
                window.auditClient.log('mode_change', {
                    fromMode: 'normal',
                    toMode: 'demo',
                    beforeData: { mode: 'normal', isDemo: false },
                    afterData: { mode: 'demo', isDemo: true }
                });
                showMessage('ãƒ¢ãƒ¼ãƒ‰å¤‰æ›´ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã—ãŸ', 'success');
                updateStats();
            }
        }

        function showRecentLogs() {
            // æœ€è¿‘ã®ãƒ­ã‚°ã‚’è¡¨ç¤ºï¼ˆå®Ÿè£…ã«å¿œã˜ã¦èª¿æ•´ï¼‰
            const logDisplay = document.getElementById('logDisplay');
            logDisplay.textContent = 'æœ€è¿‘ã®ãƒ­ã‚°ã‚’å–å¾—ä¸­...';
            
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒ­ã‚°ã‚’å–å¾—
            setTimeout(() => {
                logDisplay.textContent = 'ãƒ­ã‚°è¡¨ç¤ºæ©Ÿèƒ½ã¯å®Ÿè£…ä¸­ã§ã™...';
            }, 1000);
        }

        function clearLogDisplay() {
            document.getElementById('logDisplay').textContent = 'ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™...';
        }

        function updateSettings() {
            const enableAudit = document.getElementById('enableAudit').checked;
            const enableAutoSync = document.getElementById('enableAutoSync').checked;
            
            if (window.auditClient) {
                window.auditClient.isEnabled = enableAudit;
                window.auditClient.autoSync = enableAutoSync;
                
                if (enableAutoSync) {
                    window.auditClient.startAutoSync();
                } else {
                    window.auditClient.stopAutoSync();
                }
            }
            
            showMessage('è¨­å®šã‚’æ›´æ–°ã—ã¾ã—ãŸ', 'success');
        }

        function resetSettings() {
            document.getElementById('enableAudit').checked = true;
            document.getElementById('enableAutoSync').checked = true;
            updateSettings();
        }

        function showMessage(message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = type;
            messageDiv.textContent = message;
            
            const container = document.querySelector('.container');
            container.insertBefore(messageDiv, container.firstChild);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // æ¥ç¶šçŠ¶æ…‹ã‚’ç¢ºèª
            setTimeout(checkConnection, 2000);
            
            // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
            setTimeout(updateStats, 3000);
            
            // å®šæœŸçš„ã«æ¥ç¶šçŠ¶æ…‹ã¨çµ±è¨ˆã‚’æ›´æ–°
            setInterval(() => {
                checkConnection();
                updateStats();
            }, 10000);
        });
    </script>
</body>
</html>
